services:
  rpc-node:
    platform: linux/amd64
    container_name: sei-rpc-node
    image: "sei-chain/localnode"
    ports:
      - "26656:26656"
      - "26657:26657"
      - "26660:26660"
      - "1317:1317"
      - "9090:9090"
      - "8545:8545"
      - "8546:8546"
    environment:
      - CHAIN_ID=${CHAIN_ID:-sei}
      - MONIKER=${MONIKER:-rpc-node}
      - VALIDATOR_NODE_ID=${VALIDATOR_NODE_ID}
      - VALIDATOR_IP=${VALIDATOR_IP}
    volumes:
      - "${DATA_DIR:-./data/rpc}:/root/.sei:Z"
    restart: unless-stopped
    command: >
      sh -c "
      if [ ! -f /root/.sei/config/genesis.json ]; then
        echo 'Genesis file not found. Please initialize the node first.';
        exit 1;
      fi;
      seid start --chain-id ${CHAIN_ID:-sei}
      "

